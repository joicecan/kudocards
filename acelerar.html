<html>

<head>
    <script src="//html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style rel="stylesheet">
        body {
            margin: 0px;
        }

        #Mensagem {
            font-family: Segoe UI;
            color: white;
            font-size: 24px;
            line-height: 197%;
            position: absolute;
            margin-left: 25px;
            top: 322px;
            width: 585;
            text-align: left;
        }

        #Mensagem div {
            font-family: Segoe UI;
            font-size: 24px;
            line-height: 180%;
            width: 977;
        }

        #De {
            font-family: Segoe UI;
            color: white;
            font-size: 24px;
            position: absolute;
            margin-left: 60px;
            top: 261px;
            width: 120;
            text-align: left;
        }

        #Para {
            font-family: Segoe UI;
            color: white;
            font-size: 24px;
            position: absolute;
            margin-left: 265px;
            top: 261px;
            width: 240;
            text-align: left;
        }

        .bg-image {
            width: 650px;
            height: 650px;
            background-size: cover !important;
        }
    </style>
</head>

<body>
    <center>
        <form class="cf">
            <div class="half left cf bg-image" id="kudocard" style="background: url('./TEMPLATE_1_A-V (1).png');">
                <div id="De" class="editavel" contenteditable="true" maxlength="15">Seu Nome</div>
                <div id="Para" class="editavel" contenteditable="true" maxlength="15">Seu colega</div>
                <div id="Mensagem" class="editavel" contenteditable="true" maxlength="140">Digite sua mensagem aqui
                </div>
            </div>
        </form>

        <div id="dl-btn"></div> <br />

        <button class="button" a class="btn btn-success" href="javascript:void(0);" onclick="downloadKudoCard();">
            Crie seu Kudo Card
        </button>
       <br />
    </center>
    <br /><br />
</body>

<script>
    function downloadKudoCard() {
        html2canvas(
            document.querySelector('#kudocard'),
            { backgroundColor: null }
        )
            .then(function (canvas) {
                const image = canvas.toDataURL('image/jpg');
                const link = document.createElement('a');
                link.href = image;
                link.appendChild(document.createTextNode('Clique aqui com o bot√£o direito e selecione "Abrir link em uma nova guia" para salvar a imagem'));

                document.querySelector('#dl-btn').innerHTML = '';
                document.querySelector('#dl-btn').appendChild(link);

                link.download = 'kudocard.jpg';
                link.target = '_blank';
                link.click();
            });
    }
</script>

</html>
